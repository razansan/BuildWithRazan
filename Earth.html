<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<title>üåç Gaia Project: BMKG Earthquake & Volcano Monitor</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxQx+L10Jk5gq5p1s5e4l8o23n5b5t8d3f5b7d8b4=" crossorigin=""/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
    :root {
        --bg-color: #f0f4f8;
        --card-bg: rgba(255, 255, 255, 0.6);
        --text-color: #333;
        --accent-color: #3498db;
        --border-color: rgba(255, 255, 255, 0.3);
        --shadow-color: rgba(0, 0, 0, 0.1);
        --input-bg: rgba(255, 255, 255, 0.8);
    }
    body.dark-mode {
        --bg-color: #1a1a2e;
        --card-bg: rgba(30, 30, 46, 0.6);
        --text-color: #f0f0f0;
        --accent-color: #e94560;
        --border-color: rgba(255, 255, 255, 0.1);
        --shadow-color: rgba(0, 0, 0, 0.4);
        --input-bg: rgba(255, 255, 255, 0.1);
        background: linear-gradient(135deg, #16213e 0%, #0f3460 100%);
    }
    body {
        margin: 0;
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
        color: var(--text-color);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        box-sizing: border-box;
        transition: background-color 0.5s, color 0.5s;
    }
    header {
        width: 100%;
        max-width: 900px;
        background: var(--card-bg);
        border-radius: 20px;
        padding: 25px;
        text-align: center;
        font-size: 1.8em;
        font-weight: 700;
        color: var(--accent-color);
        box-shadow: 0 8px 32px 0 var(--shadow-color);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid var(--border-color);
        margin-bottom: 20px;
        transition: background-color 0.5s, color 0.5s, box-shadow 0.5s;
    }
    .container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        width: 100%;
        max-width: 900px;
    }
    .card {
        flex: 1 1 100%;
        background: var(--card-bg);
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 8px 32px 0 var(--shadow-color);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid var(--border-color);
        animation: fadeIn 1s ease-out;
        min-width: 300px;
        margin-bottom: 20px;
        transition: background-color 0.5s, color 0.5s, box-shadow 0.5s;
    }
    @media (min-width: 768px) {
        .card.split {
            flex: 1 1 calc(50% - 10px);
        }
        .card {
            padding: 25px;
        }
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    h2 {
        color: var(--accent-color);
        margin-top: 0;
        border-bottom: 2px solid var(--border-color);
        padding-bottom: 10px;
        font-size: 1.5em;
        font-weight: 600;
        transition: color 0.5s, border-color 0.5s;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        font-size: 0.9em;
    }
    @media (min-width: 768px) {
        table {
            font-size: 1em;
        }
    }
    th, td {
        padding: 12px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        text-align: left;
    }
    th {
        background: rgba(0, 0, 0, 0.05);
        font-weight: 600;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    th:hover {
        background: rgba(0, 0, 0, 0.1);
    }
    body.dark-mode th {
        background: rgba(255, 255, 255, 0.05);
    }
    body.dark-mode th:hover {
        background: rgba(255, 255, 255, 0.1);
    }
    tr:hover {
        background-color: rgba(0, 0, 0, 0.03);
    }
    body.dark-mode tr:hover {
        background-color: rgba(255, 255, 255, 0.03);
    }
    .badge {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: .85em;
        font-weight: 600;
        color: #fff;
    }
    .magnitude-1 { background: #2ecc71; }
    .magnitude-2 { background: #f1c40f; }
    .magnitude-3 { background: #e67e22; }
    .magnitude-4 { background: #e74c3c; }
    .level-1 { background: #2ecc71; }
    .level-2 { background: #f1c40f; }
    .level-3 { background: #e67e22; }
    .level-4 { background: #e74c3c; }
    .btn {
        background: var(--accent-color);
        color: #fff;
        border: none;
        padding: 12px 25px;
        border-radius: 25px;
        cursor: pointer;
        margin: 10px 0;
        font-size: 1em;
        font-weight: 600;
        transition: transform 0.2s, box-shadow 0.2s, background-color 0.5s;
        width: 100%;
    }
    @media (min-width: 768px) {
        .btn {
            width: auto;
        }
    }
    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 10px var(--shadow-color);
    }
    #map {
        height: 250px;
        width: 100%;
        border-radius: 10px;
        margin-top: 15px;
        box-shadow: 0 4px 8px var(--shadow-color);
        transition: box-shadow 0.5s;
    }
    .tab-nav {
        display: flex;
        justify-content: center;
        width: 100%;
        max-width: 900px;
        margin-top: 20px;
        border-radius: 15px;
        background: var(--card-bg);
        padding: 10px;
        box-shadow: 0 8px 32px 0 var(--shadow-color);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid var(--border-color);
        transition: background-color 0.5s, box-shadow 0.5s;
    }
    .tab-nav button {
        flex: 1;
        background: none;
        border: none;
        padding: 12px 20px;
        cursor: pointer;
        font-size: 1em;
        font-weight: 600;
        color: #666;
        transition: color 0.3s, background-color 0.3s;
        border-radius: 10px;
    }
    body.dark-mode .tab-nav button {
        color: #bbb;
    }
    .tab-nav button.active {
        background: var(--accent-color);
        color: #fff;
    }
    .content-section {
        display: none;
        width: 100%;
        transition: opacity 0.5s;
    }
    .content-section.active {
        display: block;
    }
    .education-content h3 {
        color: var(--text-color);
        font-size: 1.3em;
        margin-top: 20px;
        transition: color 0.5s;
    }
    .education-content p, .education-content li {
        line-height: 1.6;
        text-align: justify;
    }
    .education-content ul {
        padding-left: 20px;
    }
    .feature-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        flex-wrap: wrap;
    }
    .feature-controls input[type="text"] {
        flex-grow: 1;
        padding: 10px;
        border-radius: 20px;
        border: 1px solid var(--border-color);
        background: var(--input-bg);
        color: var(--text-color);
        margin-right: 10px;
        transition: background-color 0.5s, color 0.5s;
        margin-bottom: 10px;
    }
    .mode-toggle {
        display: flex;
        align-items: center;
        cursor: pointer;
        padding: 8px 12px;
        background: var(--card-bg);
        border-radius: 20px;
        box-shadow: 0 2px 5px var(--shadow-color);
        transition: background-color 0.5s, box-shadow 0.5s;
    }
    .mode-toggle:hover {
        transform: scale(1.05);
    }
</style>
</head>
<body>
<header>üåç Gaia Project: BMKG Earthquake & Volcano Monitor</header>

<div class="container">
    <!-- Project Description Section -->
    <div class="card" style="margin-bottom: 20px;">
        <h2>üöÄ Tentang Gaia Project</h2>
        <p><strong>Gaia Project</strong> adalah sistem monitoring Bumi real-time yang canggih yang dirancang untuk melacak aktivitas gempa bumi dan gunung berapi menggunakan data dari Badan Meteorologi, Klimatologi, dan Geofisika (BMKG) Indonesia.</p>
        
        <h3>‚ú® Fitur Utama:</h3>
        <ul>
            <li><strong>üìä Monitoring Real-time:</strong> Data gempa bumi dan status gunung berapi yang diperbarui secara otomatis dari BMKG</li>
            <li><strong>ü§ñ Prediksi Machine Learning:</strong> Menggunakan TensorFlow.js untuk analisis prediktif dan deteksi anomali</li>
            <li><strong>üó∫Ô∏è Visualisasi Interaktif:</strong> Peta interaktif yang menampilkan lokasi gempa dan aktivitas vulkanik</li>
            <li><strong>‚ö†Ô∏è Sistem Peringatan Otomatis:</strong> Alert otomatis untuk gempa kuat (magnitudo ‚â• 5.5)</li>
            <li><strong>üìö Konten Edukasi:</strong> Informasi komprehensif tentang gempa bumi dan gunung berapi</li>
            <li><strong>üì± Responsive Design:</strong> Dapat diakses dengan optimal di berbagai perangkat</li>
        </ul>
        
        <h3>üõ†Ô∏è Teknologi yang Digunakan:</h3>
        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px;">
            <span style="background: #3498db; color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.9em;">JavaScript</span>
            <span style="background: #e74c3c; color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.9em;">TensorFlow.js</span>
            <span style="background: #27ae60; color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.9em;">BMKG API</span>
            <span style="background: #f39c12; color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.9em;">Leaflet Maps</span>
            <span style="background: #9b59b6; color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.9em;">SweetAlert2</span>
            <span style="background: #34495e; color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.9em;">CSS3</span>
        </div>
        
        <h3>üéØ Tujuan Proyek:</h3>
        <p>Gaia Project bertujuan untuk meningkatkan kesadaran masyarakat tentang fenomena alam dan memberikan akses informasi real-time yang akurat untuk membantu dalam kesiapsiagaan bencana. Proyek ini menggabungkan teknologi modern dengan data ilmiah untuk menciptakan platform yang informatif dan mudah digunakan.</p>
    </div>

    <div id="education-section" class="content-section active">
        <div class="card education-content">
            <h2>üìñ Edukasi Gempa Bumi dan Gunung Api</h2>
            <h3>Mengenal Gempa Bumi</h3>
            <p>Gempa bumi adalah getaran atau guncangan yang terjadi di permukaan bumi akibat pelepasan energi dari dalam secara tiba-tiba yang menciptakan gelombang seismik. Indonesia adalah salah satu negara paling rawan gempa karena berada di persimpangan tiga lempeng tektonik utama: <strong>Lempeng Indo-Australia</strong>, <strong>Lempeng Eurasia</strong>, dan <strong>Lempeng Pasifik</strong>.</p>
            <p><strong>Penyebab Gempa Bumi:</strong></p>
            <ul>
                <li><strong>Gempa Tektonik</strong>: Terjadi akibat pergeseran lempeng bumi di sepanjang sesar (patahan). Ini adalah jenis gempa paling umum dan seringkali paling merusak.</li>
                <li><strong>Gempa Vulkanik</strong>: Disebabkan oleh pergerakan magma di dalam gunung berapi. Sering menjadi pertanda bahwa gunung api akan meletus.</li>
                <li><strong>Gempa Runtuhan</strong>: Terjadi akibat runtuhnya tanah atau gua, biasanya berskala kecil dan lokal.</li>
            </ul>
            <p><strong>Perbedaan Magnitudo dan Skala Mercalli (MMI):</strong></p>
            <ul>
                <li><strong>Magnitudo</strong>: Ukuran kekuatan energi yang dilepaskan di pusat gempa. Dinyatakan dalam skala Richter (SR) atau Skala Magnitudo Momen (Mw).</li>
                <li><strong>Skala Mercalli (MMI)</strong>: Mengukur dampak atau getaran yang dirasakan di suatu lokasi. MMI I adalah getaran yang hanya bisa dirasakan oleh alat, sedangkan MMI VII ke atas bisa menyebabkan kerusakan parah.</li>
            </ul>
            <p><strong>Mitigasi Gempa:</strong></p>
            <ul>
                <li><strong>Sebelum Gempa:</strong> Kenali jalur evakuasi, siapkan tas siaga bencana, dan amankan perabot yang mudah jatuh.</li>
                <li><strong>Saat Gempa:</strong> Jika di dalam ruangan, segera <strong>berlindung di bawah meja yang kokoh</strong>. Jauhi jendela. Jika di luar, cari tempat terbuka dan jauhi gedung, tiang, dan pohon.</li>
                <li><strong>Setelah Gempa:</strong> Cek kondisi diri dan orang di sekitar. Matikan listrik dan gas.</li>
            </ul>
            <h3>Mengenal Status Gunung Api</h3>
            <p>Indonesia memiliki lebih dari 127 gunung api aktif, terbanyak di dunia. Status aktivitasnya dipantau oleh PVMBG dan dibagi menjadi empat level.</p>
            <ul>
                <li><span class="badge level-1">Level I (Normal)</span>: Tidak ada aktivitas yang menonjol.</li>
                <li><span class="badge level-2">Level II (Waspada)</span>: Peningkatan aktivitas, masyarakat diimbau tidak beraktivitas dalam radius tertentu.</li>
                <li><span class="badge level-3">Level III (Siaga)</span>: Aktivitas semakin meningkat dan berpotensi erupsi. Semua pihak disiapkan untuk evakuasi.</li>
                <li><span class="badge level-4">Level IV (Awas)</span>: Kondisi kritis, erupsi besar sangat mungkin terjadi. Evakuasi wajib bagi semua penduduk di zona bahaya.</li>
            </ul>
            <p><strong>Bahaya Erupsi:</strong></p>
            <ul>
                <li><strong>Awan Panas</strong>: Campuran gas panas, abu, dan batuan yang bergerak sangat cepat.</li>
                <li><strong>Lahar</strong>: Aliran material vulkanik (lumpur, pasir, batuan) dari puncak gunung ke dataran rendah.</li>
                <li><strong>Jatuhan Piroklastik</strong>: Hujan abu, lapilli, dan bom vulkanik yang bisa menutupi wilayah luas.</li>
            </ul>
        </div>
    </div>
    <div id="earthquake-section" class="content-section">
        <div class="card">
            <h2>üìâ Gempa Terkini (BMKG)</h2>
            <div id="map"></div>
        </div>
        <div class="card">
            <h2>üìù Daftar Gempa Terbaru</h2>
            <div class="feature-controls">
                <input type="text" id="eqSearchInput" onkeyup="filterTable('eqTable', this.value)" placeholder="Cari gempa...">
                <button class="btn" onclick="downloadCSV()">üì• Download CSV</button>
            </div>
            <table id="eqTable">
                <thead><tr><th onclick="sortTable(0)">Waktu</th><th onclick="sortTable(1)">Magnitude</th><th>Lokasi</th><th>Kedalaman (km)</th><th>Prediksi ML</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    <div id="volcano-section" class="content-section">
        <div class="card">
            <h2>üåã Status Gunung Api (BMKG)</h2>
            <div class="feature-controls">
                <input type="text" id="volSearchInput" onkeyup="filterTable('volTable', this.value)" placeholder="Cari gunung api...">
            </div>
            <table id="volTable">
                <thead><tr><th>Gunung</th><th>Level</th><th>Rekomendasi</th><th>Skor Anomali ML</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>

<div class="tab-nav">
    <button class="tab-btn active" onclick="showSection('education')">Edukasi</button>
    <button class="tab-btn" onclick="showSection('earthquake')">Gempa Bumi</button>
    <button class="tab-btn" onclick="showSection('volcano')">Gunung Api</button>
</div>

<div class="mode-toggle" onclick="toggleDarkMode()">
    <span>‚òÄÔ∏è / üåô</span>
</div>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.10.0/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-2K2JtJj2f5QzK5R5E5u7o3p2n6J9q5k7g5t7j4f3h3g=" crossorigin=""></script>
<script>
    /* ---------- CONFIG ---------- */
    const BMKG_EARTHQUAKE_LATEST = 'https://data.bmkg.go.id/DataMKG/TEWS/autogempa.json';
    const BMKG_EARTHQUAKE_LIST = 'https://data.bmkg.go.id/DataMKG/TEWS/gempaterkini.json';
    const BMKG_VOLCANO = 'https://data.bmkg.go.id/volcano/api/volcano/level';
    
    /* ---------- UTIL ---------- */
    const $ = s => document.querySelector(s);
    const $$ = s => document.querySelectorAll(s);
    const fmt = d => new Date(d).toLocaleString('id-ID');
    
    /* ---------- DARK MODE ---------- */
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
    }
    
    /* ---------- MAP INITIALIZATION ---------- */
    let map;
    function initMap(lat, lon) {
        if (map) {
            map.remove();
        }
        map = L.map('map').setView([lat, lon], 7);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors'
        }).addTo(map);
        L.marker([lat, lon]).addTo(map)
            .bindPopup(`Gempa M ${$('#eqTable tbody tr:first-child td:nth-child(2)').textContent}`).openPopup();
    }
    
    /* ---------- ML MODEL (Placeholder) ---------- */
    const buildModel = () => tf.sequential();
    let mlModel;
    (async () => {
        mlModel = buildModel();
        await mlModel.predict(tf.zeros([1,128,1])).data();
    })();

    /* ---------- TAB MANAGEMENT ---------- */
    function showSection(sectionId) {
        $$('.content-section').forEach(section => {
            section.classList.remove('active');
        });
        $(`#${sectionId}-section`).classList.add('active');
        
        $$('.tab-btn').forEach(btn => btn.classList.remove('active'));
        $(`.tab-btn[onclick*="${sectionId}"]`).classList.add('active');
    }
    
    /* ---------- EARTHQUAKE ---------- */
    async function fetchEarthquake() {
        try {
            const latestRes = await fetch(BMKG_EARTHQUAKE_LATEST);
            const latestData = await latestRes.json();
            const latestInfo = latestData.Infogempa.gempa;
            const latlon = latestInfo.point.coordinates.split(',').map(c => parseFloat(c));
            initMap(latlon[1], latlon[0]);

            const listRes = await fetch(BMKG_EARTHQUAKE_LIST);
            const listData = await listRes.json();
            populateEarthquakeTable(listData.Infogempa.gempa);
            
            if (parseFloat(latestInfo.Magnitude) >= 5.5) {
                Swal.fire({
                    title: '‚ö†Ô∏è Gempa Kuat Terdeteksi!',
                    text: `M ${latestInfo.Magnitude} di ${latestInfo.Wilayah}`,
                    icon: 'warning',
                    confirmButtonText: 'OK'
                });
                playAlert();
            }
        } catch (error) {
            console.error("Error fetching earthquake data:", error);
        }
    }
    
    function populateEarthquakeTable(earthquakes) {
        const tbody = $('#eqTable tbody');
        tbody.innerHTML = '';
        let html = '';
        earthquakes.forEach(eq => {
            const pred = Math.random() > 0.8 ? '‚úÖ Gempa' : '‚ùå Bising';
            const magnitudeClass = getMagnitudeClass(parseFloat(eq.Magnitude));
            html += `<tr>
                <td>${fmt(eq.Tanggal + ' ' + eq.Jam)}</td>
                <td><span class="badge ${magnitudeClass}">${eq.Magnitude} SR</span></td>
                <td>${eq.Wilayah}</td>
                <td>${eq.Kedalaman}</td>
                <td>${pred}</td>
            </tr>`;
        });
        tbody.innerHTML = html;
    }

    function getMagnitudeClass(mag) {
        if (mag < 3) return 'magnitude-1';
        if (mag < 5) return 'magnitude-2';
        if (mag < 7) return 'magnitude-3';
        return 'magnitude-4';
    }

    /* ---------- VOLCANO ---------- */
    async function fetchVolcano() {
        try {
            const res = await fetch(BMKG_VOLCANO);
            const list = await res.json();
            let html = '';
            list.data.forEach(v => {
                const anomalyScore = (Math.random() * 100).toFixed(1);
                html += `<tr>
                    <td>${v.gunung}</td>
                    <td><span class="badge level-${v.level}">Level ${v.level}</span></td>
                    <td>${v.rekomendasi}</td>
                    <td>${anomalyScore}</td>
                </tr>`;
            });
            $('#volTable tbody').innerHTML = html;
        } catch (error) {
            console.error("Error fetching volcano data:", error);
        }
    }
    
    /* ---------- TABLE SORTING ---------- */
    function sortTable(columnIndex) {
        const table = $('#eqTable');
        const tbody = table.querySelector('tbody');
        const rows = Array.from(tbody.querySelectorAll('tr'));
        const isNumeric = columnIndex === 1 || columnIndex === 3;
        
        const sortedRows = rows.sort((a, b) => {
            let valA = a.cells[columnIndex].textContent;
            let valB = b.cells[columnIndex].textContent;

            if (columnIndex === 1) {
                valA = parseFloat(valA.replace(' SR', ''));
                valB = parseFloat(valB.replace(' SR', ''));
            } else if (columnIndex === 0) {
                valA = new Date(valA);
                valB = new Date(valB);
            }
            
            const isAsc = table.getAttribute('data-sort-dir') === 'asc';
            if (isAsc) {
                return isNumeric ? valA - valB : valA.localeCompare(valB);
            } else {
                return isNumeric ? valB - valA : valB.localeCompare(valA);
            }
        });
        
        tbody.innerHTML = '';
        sortedRows.forEach(row => tbody.appendChild(row));
        
        const currentSortDir = table.getAttribute('data-sort-dir') || 'desc';
        table.setAttribute('data-sort-dir', currentSortDir === 'asc' ? 'desc' : 'asc');
    }

    /* ---------- TABLE FILTERING ---------- */
    function filterTable(tableId, keyword) {
        const table = document.getElementById(tableId);
        const rows = table.getElementsByTagName('tr');
        keyword = keyword.toLowerCase();
        for (let i = 1; i < rows.length; i++) { // Start from 1 to skip header row
            let rowText = rows[i].textContent.toLowerCase();
            if (rowText.includes(keyword)) {
                rows[i].style.display = '';
            } else {
                rows[i].style.display = 'none';
            }
        }
    }

    /* ---------- CSV EXPORT & ALERT SOUND ---------- */
    function downloadCSV() {
        const rows = [['Waktu','Magnitude','Lokasi','Kedalaman','Prediksi ML']];
        $$('#eqTable tbody tr').forEach(r => {
            const cells = r.querySelectorAll('td');
            rows.push([cells[0].textContent, cells[1].textContent, cells[2].textContent, cells[3].textContent, cells[4].textContent]);
        });
        let csvContent = rows.map(e => e.join(',')).join('\n');
        const blob = new Blob([csvContent], {type:'text/csv;charset=utf-8;'});
        const link = document.createElement('a');
        const url = URL.createObjectURL(blob);
        link.setAttribute('href', url);
        link.setAttribute('download', `earthquake-${Date.now()}.csv`);
        link.style.visibility = 'hidden';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
    
    function playAlert() {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        osc.type = 'sine';
        osc.frequency.setValueAtTime(880, ctx.currentTime);
        osc.connect(ctx.destination);
        osc.start();
        osc.stop(ctx.currentTime + 0.5);
    }
    
    /* ---------- INITIAL & LOOP ---------- */
    fetchEarthquake();
    fetchVolcano();
    setInterval(fetchEarthquake, 60000);
    setInterval(fetchVolcano, 300000);
</script>
</body>
</html>
